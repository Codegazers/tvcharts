(this["webpackJsonptv-ratings-chart-client"]=this["webpackJsonptv-ratings-chart-client"]||[]).push([[0],{113:function(e,t,a){e.exports=a(205)},118:function(e,t,a){},121:function(e,t){},123:function(e,t){},156:function(e,t){},157:function(e,t){},204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(37),s=a.n(r),o=(a(118),a(22)),l=a(20),u=a(208),i=a(7),m=a(207);var f=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)([]),l=Object(i.a)(o,2),u=l[0],f=l[1];return Object(n.useEffect)((function(){e.seasons.sort((function(e,t){return e.averageRating-t.averageRating})),s(e.seasons.slice(-3).reverse()),f(e.seasons.slice(0,3))}),[e]),c.a.createElement("div",{className:"text-left mt-4 mb-5 ml-3"},c.a.createElement("h6",null,"Best Episodes"),c.a.createElement(m.a,null,r.length>0&&c.a.createElement(p,{episodes:r})),c.a.createElement("h6",{className:"mt-3"},"Worst Episodes"),c.a.createElement(m.a,null,u.length>0&&c.a.createElement(p,{episodes:u})))},h=a(106),E=a(104);var b=function(e){var t=Object(n.useState)(e.episode),a=Object(i.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.episode)}),[e]),c.a.createElement(h.a,{className:"rating-".concat(Math.floor(r.averageRating)," mb-1 d-flex justify-content-center align-items-center")},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer","data-tip":!0,"data-for":e.id,href:"https://www.imdb.com/title/".concat(r.tconst,"/")},r.averageRating),c.a.createElement(E.a,{id:e.id,type:"dark"},c.a.createElement("h6",{className:"mb-0"},r.title),c.a.createElement("em",null,r.numVotes.toLocaleString()," votes")))};var d=function(){return c.a.createElement(u.a,{className:"vh-100 d-flex flex-column justify-content-center align-items-center"},c.a.createElement("h1",null,"TV Charts"),c.a.createElement("h6",null,"Episode ratings for the entire run of series"),c.a.createElement(x,null))};var p=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.episodes)}),[e]),c.a.createElement(h.a,null,r.map((function(e,t){return c.a.createElement(m.a,{key:t},c.a.createElement(h.a,{xs:2},e.averageRating),c.a.createElement(h.a,{className:"text-left"},c.a.createElement("a",{href:"https://www.imdb.com/title/".concat(e.tconst,"/"),target:"_blank",rel:"noopener noreferrer"},e.title)))})))},v=a(212),j="http://tvcharts.ianray.com/api";var O={search:function(e){return fetch("".concat(j,"/search/").concat(encodeURIComponent(e))).then((function(e){return e.json()})).then((function(e){return e}))},show:function(e){return fetch("".concat(j,"/show/").concat(e)).then((function(e){return e.json()})).then((function(e){return e[0]}))},poster:function(e){return fetch("".concat(j,"/poster/").concat(e)).then((function(e){return e.text()})).then((function(e){return e}))},episodes:function(e){return fetch("".concat(j,"/seasons/").concat(e)).then((function(e){return e.json()})).then((function(e){var t=e.reduce((function(e,t){return e[t.seasonNumber]=e[t.seasonNumber]||[],e[t.seasonNumber].push(t),e[t.seasonNumber].sort((function(e,t){return e.episodeNumber>t.episodeNumber?1:t.episodeNumber>e.episodeNumber?-1:0})),e}),Object.create(null));return{allEpisodes:e,seasons:t}}))}},g={home:"TV Charts for Shows Over All Time",show:"TV Chart for ",search:"Search results for: "},w=function(e,t){var a=e in g?g[e]:"";document.title="".concat(a," ").concat(t," | TV Charts")};var S=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),f=l[0],E=l[1],b=Object(n.useState)([]),d=Object(i.a)(b,2),p=d[0],j=d[1],g=Object(n.useState)(!1),S=Object(i.a)(g,2),N=S[0],k=S[1],y=Object(n.useCallback)((function(e){s(e),E(!1),k(!0),j([]),O.search(e).then((function(t){!1===t.response?E(!0):(E(!1),j(t.results),w("search",e)),k(!1)}))}),[]);return Object(n.useEffect)((function(){y(e.match.params.query)}),[e.match.params.query,y]),c.a.createElement(u.a,null,c.a.createElement(x,null),N&&c.a.createElement("div",null,"Searching ..."),(p.length>0||f)&&c.a.createElement(m.a,null,c.a.createElement(h.a,{className:"text-left"},'Search results for "',r,'"')),f&&c.a.createElement(v.a,{variant:"danger"},"No Results Found"),p.length>0&&c.a.createElement(T,{shows:p}))},N=a(211),k=a(209);var x=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],s=Object(l.f)();return c.a.createElement(N.a,{onSubmit:function(e){e.preventDefault(),r(""),s.push("/search/".concat(a))},className:"mt-3"},c.a.createElement(m.a,null,c.a.createElement(h.a,{xs:10},c.a.createElement(N.a.Group,{controlId:"showTitle"},c.a.createElement(N.a.Control,{type:"text",onChange:function(e){r(e.target.value)},value:a,autoComplete:"off",autoCorrect:"off",spellCheck:"off",placeholder:"example: The Office"}))),c.a.createElement(h.a,{xs:2},c.a.createElement(k.a,{type:"submit"},"Submit"))))},y=a(210);var C=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){O.poster(e.tconst).then((function(e){return s(e)}))}),[e.tconst]),c.a.createElement("a",{href:e.link,target:e.target},c.a.createElement(y.a,{fluid:!0,src:r,className:"p-2"}))};var T=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.shows)}),[e.shows]),c.a.createElement(m.a,null,r.map((function(e,t){return c.a.createElement(h.a,{xs:6,sm:4,md:3,key:t,className:"text-center p-3"},c.a.createElement(C,{tconst:e.tconst,target:"_self",link:"/show/".concat(e.tconst)}),c.a.createElement(o.b,{to:"/show/".concat(e.tconst)},c.a.createElement("h5",{className:"mt-2 mb-0"},e.primaryTitle)),c.a.createElement("em",null,e.startYear," - ","\\N"===e.endYear?"":e.endYear))})))};var R={scale:function(e){var t=document.getElementById(e);if(t){var a=t.scrollWidth,n=t.offsetWidth;return a>n?n/a:1}return 1},debounce:function(e){var t;return function(a){t&&clearTimeout(t),t=setTimeout(e,200,a)}}};var V=function(e){var t=Object(n.useState)({}),a=Object(i.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!0),l=Object(i.a)(o,2),u=l[0],f=l[1],E=Object(n.useCallback)((function(e){O.episodes(e).then((function(e){s(e.seasons),f(!1),d(e.allEpisodes),p(R.scale("ratings"))}))}),[]),d=Object(n.useCallback)((function(t){e.handleAllSeasons(t)}),[]),p=Object(n.useCallback)((function(t){e.handleScale(t)}),[]);return Object(n.useEffect)((function(){E(e.tconst);var t=R.debounce((function(e){var t=R.scale("ratings");p(t)}));return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[e.tconst]),c.a.createElement(m.a,null,u?c.a.createElement("div",null,"Loading ..."):Object.keys(r).map((function(t,a){return c.a.createElement(h.a,{xs:1,key:a,className:"mr-1 p-0"},c.a.createElement("strong",null,t),r[t].map((function(t,a){return c.a.createElement(b,{key:a,episode:t,scale:e.scale,id:"S".concat(t.seasonNumber,"E").concat(t.episodeNumber)})})))})))};var L=function(e){var t=Object(n.useState)({}),a=Object(i.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)([]),l=Object(i.a)(o,2),u=l[0],E=l[1],b=Object(n.useState)(!1),d=Object(i.a)(b,2),p=d[0],j=d[1],g=Object(n.useState)(!0),S=Object(i.a)(g,2),N=S[0],k=S[1],y=Object(n.useState)(1),C=Object(i.a)(y,2),T=C[0],R=C[1],L=Object(n.useCallback)((function(e){O.show(e).then((function(e){e?(j(!1),s(e),k(!1),w("show",e.primaryTitle)):(j(!0),k(!1))}))}),[]);return Object(n.useEffect)((function(){L(e.match.params.tconst)}),[e.match.params.tconst,L]),c.a.createElement("div",{className:"px-2"},c.a.createElement(m.a,null,c.a.createElement(x,null)),p&&c.a.createElement(h.a,{xs:3},c.a.createElement(v.a,{variant:"danger"},"Show Not Found")),N&&c.a.createElement("div",null,"Loading ..."),!N&&!p&&c.a.createElement(m.a,null,c.a.createElement(h.a,{lg:2,md:3,sm:4},c.a.createElement(Y,{show:r}),c.a.createElement(f,{seasons:u})),c.a.createElement(h.a,{lg:10,md:9,sm:8,id:"ratings",className:"pl-4",style:{transform:"scale(".concat(T)}},c.a.createElement(V,{tconst:r.tconst,handleAllSeasons:E,handleScale:R,scale:T}))))};var Y=function(e){var t=Object(n.useState)({}),a=Object(i.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.show)}),[e.show]),c.a.createElement(h.a,{className:"text-left"},c.a.createElement(m.a,null,c.a.createElement(C,{tconst:r.tconst,target:"_blank",rel:"noopener noreferrer",link:"https://www.imdb.com/title/".concat(r.tconst,"/")})),c.a.createElement("a",{href:"https://www.imdb.com/title/".concat(r.tconst,"/"),target:"_blank",rel:"noopener noreferrer"},c.a.createElement("h4",null,r.primaryTitle)),c.a.createElement("h6",null,r.startYear," - ","\\N"===r.endYear?"":r.endYear),c.a.createElement("h4",null,c.a.createElement("strong",{className:"pr-2"},r.averageRating),c.a.createElement("small",null,"(",r.numVotes&&r.numVotes.toLocaleString(),")")))};a(204);var W=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(u.a,{fluid:!0},c.a.createElement(o.a,null,c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:"/",component:d}),c.a.createElement(l.a,{exact:!0,path:"/search/:query",component:S}),c.a.createElement(l.a,{exact:!0,path:"/show/:tconst",component:L})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,null,c.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[113,1,2]]]);
//# sourceMappingURL=main.e657e296.chunk.js.map