(this["webpackJsonptv-ratings-chart-client"]=this["webpackJsonptv-ratings-chart-client"]||[]).push([[0],{113:function(e,t,a){e.exports=a(205)},118:function(e,t,a){},121:function(e,t){},123:function(e,t){},156:function(e,t){},157:function(e,t){},204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(37),s=a.n(r),o=(a(118),a(22)),l=a(20),u=a(208),m=a(7),i=a(103),f=a(207);var h=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)([]),l=Object(m.a)(o,2),u=l[0],h=l[1];return Object(n.useEffect)((function(){e.seasons.sort((function(e,t){return e.averageRating-t.averageRating})),s(e.seasons.slice(-3).reverse()),h(e.seasons.slice(0,3).reverse())}),[e]),c.a.createElement(i.a,{className:"text-left mt-2 mb-4"},c.a.createElement(f.a,null,c.a.createElement("h6",null,"Best Episodes")),r.length>0&&c.a.createElement(p,{episodes:r}),c.a.createElement(f.a,null,c.a.createElement("h6",{className:"mt-3"},"Worst Episodes")),u.length>0&&c.a.createElement(p,{episodes:u}))},E=a(105);var b=function(e){var t=Object(n.useState)(e.episode),a=Object(m.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.episode)}),[e.episode]),c.a.createElement(i.a,{className:"rating-".concat(Math.floor(r.averageRating)," mb-1 d-flex justify-content-center align-items-center")},c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer","data-tip":!0,"data-for":e.id,href:"https://www.imdb.com/title/".concat(r.tconst,"/")},r.averageRating),c.a.createElement(E.a,{id:e.id,type:"dark"},c.a.createElement("h6",{className:"mb-0"},r.title),c.a.createElement("em",null,r.numVotes.toLocaleString()," votes")))};var d=function(){return c.a.createElement(u.a,{className:"vh-100 d-flex flex-column justify-content-center align-items-center"},c.a.createElement("h1",null,"TV Charts"),c.a.createElement("h6",null,"Episode ratings for the entire run of series"),c.a.createElement(C,null))};var p=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.episodes)}),[e]),c.a.createElement(f.a,null,r.map((function(e,t){return c.a.createElement(i.a,{xs:12,key:t,className:"d-inline-flex flex-columns list-".concat(Math.floor(e.averageRating))},c.a.createElement("div",null,e.averageRating.toFixed(1)),c.a.createElement("span",{className:"text-left"},c.a.createElement("a",{href:"https://www.imdb.com/title/".concat(e.tconst,"/"),target:"_blank",rel:"noopener noreferrer"},e.title)))})))},v=a(209);var j=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.message)}),[e.message]),c.a.createElement(i.a,{className:"vh-100 d-flex flex-column justify-content-center align-items-center text-primary"},c.a.createElement(v.a,{animation:"grow",variant:"primary"}),c.a.createElement("h2",{className:"mt-2"},r))},O=a(213),g="http://tvcharts.ianray.com/api";var w={search:function(e){return fetch("".concat(g,"/search/").concat(encodeURIComponent(e))).then((function(e){return e.json()})).then((function(e){return e}))},show:function(e){return fetch("".concat(g,"/show/").concat(e)).then((function(e){return e.json()})).then((function(e){return e[0]}))},poster:function(e){return fetch("".concat(g,"/poster/").concat(e)).then((function(e){return e.text()})).then((function(e){return e}))},episodes:function(e){return fetch("".concat(g,"/seasons/").concat(e)).then((function(e){return e.json()})).then((function(e){var t=e.reduce((function(e,t){return e[t.seasonNumber]=e[t.seasonNumber]||[],e[t.seasonNumber].push(t),e[t.seasonNumber].sort((function(e,t){return e.episodeNumber>t.episodeNumber?1:t.episodeNumber>e.episodeNumber?-1:0})),e}),Object.create(null));return{allEpisodes:e,seasons:t}}))}},N={home:"TV Charts for Shows Over All Time",show:"TV Chart for ",search:"Search results for: "},S=function(e,t){var a=e in N?N[e]:"";document.title="".concat(a," ").concat(t," | TV Charts")};var x=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!1),l=Object(m.a)(o,2),h=l[0],E=l[1],b=Object(n.useState)([]),d=Object(m.a)(b,2),p=d[0],v=d[1],g=Object(n.useState)(!1),N=Object(m.a)(g,2),x=N[0],y=N[1],k=Object(n.useCallback)((function(e){s(e),E(!1),y(!0),v([]),w.search(e).then((function(t){!1===t.response?E(!0):(E(!1),v(t.results),S("search",e)),y(!1)}))}),[]);return Object(n.useEffect)((function(){k(e.match.params.query)}),[e.match.params.query,k]),c.a.createElement(u.a,null,c.a.createElement(C,null),x&&c.a.createElement(j,{message:"Searching for '".concat(r,"'...")}),(p.length>0||h)&&c.a.createElement(f.a,null,c.a.createElement(i.a,{className:"text-left"},'Search results for "',r,'"')),h&&c.a.createElement(O.a,{variant:"danger"},"No Results Found"),p.length>0&&c.a.createElement(V,{shows:p}))},y=a(212),k=a(210);var C=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],r=t[1],s=Object(l.f)();return c.a.createElement(y.a,{onSubmit:function(e){e.preventDefault(),r(""),s.push("/search/".concat(a))},className:"mt-3"},c.a.createElement(f.a,null,c.a.createElement(i.a,{xs:10},c.a.createElement(y.a.Group,{controlId:"showTitle"},c.a.createElement(y.a.Control,{type:"text",onChange:function(e){r(e.target.value)},value:a,autoComplete:"off",autoCorrect:"off",spellCheck:"off",placeholder:"example: The Office"}))),c.a.createElement(i.a,{xs:2},c.a.createElement(k.a,{type:"submit"},"Submit"))))},T=a(211);var R=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){w.poster(e.tconst).then((function(e){return s(e)}))}),[e.tconst]),c.a.createElement("a",{href:e.link,target:e.target},c.a.createElement(T.a,{fluid:!0,src:r,className:"p-2"}))};var V=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.shows)}),[e.shows]),c.a.createElement(f.a,null,r.map((function(e,t){return c.a.createElement(i.a,{xs:6,sm:4,md:3,key:t,className:"text-center p-3"},c.a.createElement(R,{tconst:e.tconst,target:"_self",link:"/show/".concat(e.tconst)}),c.a.createElement(o.b,{to:"/show/".concat(e.tconst)},c.a.createElement("h5",{className:"mt-2 mb-0"},e.primaryTitle)),c.a.createElement("em",null,e.startYear," - ","\\N"===e.endYear?"":e.endYear))})))};var Y={scale:function(e){var t=document.getElementById(e);if(t){var a=t.scrollWidth,n=t.offsetWidth;return a>n?n/a:1}return 1},debounce:function(e){var t;return function(a){t&&clearTimeout(t),t=setTimeout(e,200,a)}}};var L=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(!0),l=Object(m.a)(o,2),u=l[0],h=l[1],E=Object(n.useCallback)((function(e){w.episodes(e).then((function(e){s(e.seasons),h(!1),d(e.allEpisodes),p(Y.scale("ratings"))}))}),[e.tconst]),d=Object(n.useCallback)((function(t){e.handleAllSeasons(t)}),[]),p=Object(n.useCallback)((function(t){e.handleScale(t)}),[]);return Object(n.useEffect)((function(){E(e.tconst);var t=Y.debounce((function(e){var t=Y.scale("ratings");p(t)}));return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[e.tconst,p,E]),c.a.createElement(f.a,null,u?c.a.createElement(j,{message:"Loading ".concat(e.episodeCount," episodes...")}):Object.keys(r).map((function(t,a){return c.a.createElement(i.a,{xs:1,key:a,className:"mr-1 p-0"},c.a.createElement("strong",null,t),r[t].map((function(t,a){return c.a.createElement(b,{key:a,episode:t,scale:e.scale,id:"S".concat(t.seasonNumber,"E").concat(t.episodeNumber)})})))})))};var W=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)([]),l=Object(m.a)(o,2),u=l[0],E=l[1],b=Object(n.useState)(!1),d=Object(m.a)(b,2),p=d[0],v=d[1],g=Object(n.useState)(!0),N=Object(m.a)(g,2),x=N[0],y=N[1],k=Object(n.useState)(1),T=Object(m.a)(k,2),R=T[0],V=T[1],Y=Object(n.useCallback)((function(e){w.show(e).then((function(e){e?(v(!1),s(e),y(!1),S("show",e.primaryTitle)):(v(!0),y(!1))}))}),[]);return Object(n.useEffect)((function(){Y(e.match.params.tconst)}),[e.match.params.tconst,Y]),c.a.createElement("div",{className:"px-1"},c.a.createElement(f.a,null,c.a.createElement(C,null)),p&&c.a.createElement(i.a,{xs:3},c.a.createElement(O.a,{variant:"danger"},"Show Not Found")),x&&c.a.createElement(j,null),!x&&!p&&c.a.createElement(f.a,null,c.a.createElement(i.a,{lg:2,md:3,sm:4},c.a.createElement(_,{show:r}),c.a.createElement(h,{seasons:u})),c.a.createElement(i.a,{lg:10,md:9,sm:8,id:"ratings",style:{transform:"scale(".concat(R)}},c.a.createElement(L,{tconst:r.tconst,episodeCount:r.episodeCount,handleAllSeasons:E,handleScale:V,scale:R}))))};var _=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.show)}),[e.show]),c.a.createElement(f.a,{className:"text-left"},c.a.createElement(i.a,{xs:6,sm:10},r.tconst&&c.a.createElement(R,{tconst:r.tconst,target:"_blank",rel:"noopener noreferrer",link:"https://www.imdb.com/title/".concat(r.tconst,"/")})),c.a.createElement(i.a,{xs:12},c.a.createElement("h4",{className:"mb-0"},r.primaryTitle),c.a.createElement("small",null,r.startYear," - ","\\N"===r.endYear?"":r.endYear)),c.a.createElement(i.a,{xs:12},c.a.createElement("h4",{className:"mt-2"},c.a.createElement("strong",{className:"pr-2"},r.averageRating),c.a.createElement("small",null,"(",r.numVotes&&r.numVotes.toLocaleString(),")"),c.a.createElement("a",{href:"https://www.imdb.com/title/".concat(r.tconst,"/"),target:"_blank",rel:"noopener noreferrer",className:"ml-2 small"},"imdb"))))};a(204);var A=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(u.a,{fluid:!0},c.a.createElement(o.a,null,c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:"/",component:d}),c.a.createElement(l.a,{exact:!0,path:"/search/:query",component:x}),c.a.createElement(l.a,{exact:!0,path:"/show/:tconst",component:W})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,null,c.a.createElement(A,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[113,1,2]]]);
//# sourceMappingURL=main.56565abd.chunk.js.map